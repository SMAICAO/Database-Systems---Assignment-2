{% extends "layout.html" %}

{% block content %}
<h3 class="mb-2">
  Cart {{ cart.Cart_ID }}
  {% if cart.Cart_name %}
    – {{ cart.Cart_name }}
  {% endif %}
</h3>

<p class="text-muted">
  Total amount:
  <strong>{{ "{:,.2f}".format(total_amount or 0) }} {{ currency }}</strong>
</p>

<a href="{{ url_for('cart_list') }}" class="btn btn-secondary mb-3">
  ← Back to carts
</a>

<table class="table table-striped table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>Cart Item ID</th>
      <th>ASIN</th>
      <th>Product Title</th>
      <th>Offer ID</th>
      <th>Seller</th>
      <th>Price</th>
      <th>Qty</th>
      <th>Line total</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
      <tr>
        <td>{{ item.Cart_Item_ID }}</td>
        <td>{{ item.ASIN }}</td>
        <td>{{ item.Product_title }}</td>
        <td>{{ item.Offer_ID or '-' }}</td>
        <td>
          {% if item.Storefront_name %}
            {{ item.Storefront_name }} ({{ item.Seller_ID }})
          {% else %}
            -
          {% endif %}
        </td>
        <td>
          {% if item.Price is not none %}
            {{ "{:,.2f}".format(item.Price) }} {{ item.Currency }}
          {% else %}
            N/A
          {% endif %}
        </td>
        <td>{{ item.Quantity }}</td>
        <td>
          {{ "{:,.2f}".format(item.Line_total or 0) }} {{ item.Currency or currency }}
        </td>
      </tr>
    {% endfor %}

    {% if items|length == 0 %}
      <tr>
        <td colspan="8" class="text-center text-muted">Cart is empty.</td>
      </tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
