{% extends "layout.html" %}

{% block content %}
<h3 class="mb-3">Carts</h3>

<table class="table table-striped table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>Cart ID</th>
      <th>Cart name</th>
      <th>#Items</th>
      <th>Total amount (USD)</th>
      <th style="width: 260px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for c in carts %}
      <tr>
        <td>{{ c.Cart_ID }}</td>
        <td>{{ c.Cart_name or '(no name)' }}</td>
        <td>{{ c.Item_count }}</td>
        <td>{{ "{:,.2f}".format(c.Total_amount or 0) }}</td>
       <td>
        <div class="d-flex gap-2">
          <a href="{{ url_for('cart_detail', cart_id=c.Cart_ID) }}"
            class="btn btn-sm btn-outline-primary">
            View
          </a>

          <a href="{{ url_for('cart_edit', cart_id=c.Cart_ID) }}"
            class="btn btn-sm btn-outline-secondary">
            Edit
          </a>

          <form method="post"
                action="{{ url_for('cart_delete', cart_id=c.Cart_ID) }}"
                class="m-0"
                onsubmit="return confirm('Delete this cart and all its items?');">
            <button type="submit" class="btn btn-sm btn-outline-danger">
              Delete
            </button>
          </form>
        </div>
      </td>

      </tr>
    {% endfor %}

    {% if carts|length == 0 %}
      <tr>
        <td colspan="5" class="text-center text-muted">No carts found.</td>
      </tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
