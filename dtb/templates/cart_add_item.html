{% extends "layout.html" %}

{% block content %}
<h3 class="mb-4">Add product to cart</h3>

<div class="mb-3">
  <span class="badge bg-secondary">ASIN: {{ asin }}</span>
  <span class="ms-2">{{ product_title }}</span>
</div>

<form method="post" class="row g-3" style="max-width: 480px;">

  <div class="col-12">
    <label class="form-label">Quantity</label>
    <input type="number" name="quantity"
           class="form-control" value="1" min="1" required>
  </div>

  <div class="col-12">
    <label class="form-label">Target cart</label>
    <div class="form-check">
      <input class="form-check-input" type="radio"
             name="cart_mode" id="mode_new"
             value="new" checked>
      <label class="form-check-label" for="mode_new">
        Create new cart
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio"
             name="cart_mode" id="mode_existing"
             value="existing">
      <label class="form-check-label" for="mode_existing">
        Add to existing cart
      </label>
    </div>
  </div>

  <div class="col-12">
    <label class="form-label">Existing cart (optional)</label>
    <select name="existing_cart_id" class="form-select">
      <option value="">-- Choose a cart --</option>
      {% for c in carts %}
        <option value="{{ c.Cart_ID }}">
          {{ c.Cart_ID }} – {{ c.Cart_product_title or 'No main product' }}
          ({{ c.Item_count }} items)
        </option>
      {% endfor %}
    </select>
    <div class="form-text">
      Nếu chọn "Add to existing cart" thì nhớ chọn Cart ID ở trên.
    </div>
  </div>

  <div class="col-12 d-flex justify-content-between mt-3">
    <a href="{{ url_for('product_list') }}" class="btn btn-secondary">Back</a>
    <button type="submit" class="btn btn-primary">Add</button>
  </div>
</form>

{% endblock %}
